<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <ul class="ul"></ul>

    <script src="/socket.io/socket.io.js"></script>
    <script>


      function add(text) {
        var textNode = document.createTextNode(text);
        var ul = document.querySelector('.ul');
        var li = document.createElement('li');

        li.appendChild(textNode);
        ul.appendChild(li);
      }


      var socket = io();

      socket.on('error', console.error.bind(console));
      socket.on('message', console.log.bind(console));
      socket.on('time', function(data) { add(data.time) });

      socket.on('server', function(data) {
        add(data.message);

        // Respond with a message including this clients' id sent from the server
        socket.emit('client',
          {
            data: 'Hello Server!',
            id: data.id,
          }
        );
      });
    </script>
  </body
</html>
